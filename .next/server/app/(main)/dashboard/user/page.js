(()=>{var e={};e.id=54,e.ids=[54],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},53963:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>f,tree:()=>d});var s=t(86186),a=t(16557),i=t(46437),l=t.n(i),n=t(94842),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d=["",{children:["(main)",{children:["dashboard",{children:["user",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17833)),"/Users/iannjoroge/dummy/hikdigitalmart_admin/src/app/(main)/dashboard/user/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,22997)),"/Users/iannjoroge/dummy/hikdigitalmart_admin/src/app/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,40571,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,21430,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,75055,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6588))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,45874)),"/Users/iannjoroge/dummy/hikdigitalmart_admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,40571,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,21430,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,75055,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6588))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/iannjoroge/dummy/hikdigitalmart_admin/src/app/(main)/dashboard/user/page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(main)/dashboard/user/page",pathname:"/dashboard/user",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},66178:(e,r,t)=>{Promise.resolve().then(t.bind(t,17833))},682:(e,r,t)=>{Promise.resolve().then(t.bind(t,57977))},57977:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>e9});var s=t(35422),a=t(4715),i=t(77784),l=t(108),n=t(2323),o=t(79792),d=t(54596),u=t(25516),c=t(20719),f=t(67790),m=t(60479),h=t(46506);let p=(0,t(75710).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var y=t(80280),x=t(99252),g=t(17753),b=t(27518);let v=(0,c.memo)(({user:e,onEdit:r})=>(0,s.jsxs)(b.Hj,{children:[(0,s.jsx)(b.nA,{}),(0,s.jsxs)(b.nA,{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,s.jsx)(b.nA,{children:e.email}),(0,s.jsx)(b.nA,{children:e.phoneNumber||"â€”"}),(0,s.jsx)(b.nA,{children:(0,s.jsx)(m.E,{className:(e=>{switch(e){case"SUDO":return"bg-red-100 text-red-800 hover:bg-red-200";case"TECHNICIAN":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"WHOLESALER":return"bg-purple-100 text-purple-800 hover:bg-purple-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}})(e.role.name),children:e.role.name})}),(0,s.jsxs)(b.nA,{className:"flex gap-1 flex-wrap",children:[e.isVerified?(0,s.jsx)(m.E,{className:"bg-green-100 text-green-800",children:"Verified"}):(0,s.jsx)(m.E,{variant:"outline",children:"Unverified"}),e.technicianVerified&&(0,s.jsx)(m.E,{className:"bg-blue-100 text-blue-800",children:"Tech"}),e.shopOwnerVerified&&(0,s.jsx)(m.E,{className:"bg-yellow-100 text-yellow-800",children:"Shop"})]}),(0,s.jsx)(b.nA,{children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,s.jsx)(b.nA,{className:"w-24",children:(0,s.jsxs)("button",{onClick:()=>r(e),className:"inline-flex items-center gap-1 text-blue-600 hover:underline text-sm",children:[(0,s.jsx)(p,{className:"w-4 h-4"}),"Edit"]})})]}));function j({users:e,currentPage:r,totalPages:t,onPageChange:a,searchTerm:i="",onSearchTermChange:l,roles:n,selectedRoleId:o="ALL",onRoleChange:d,onEdit:u,isLoading:f=!1}){let[m,p]=(0,c.useState)(i);return function(e,r){let[t,s]=(0,c.useState)(e)}(m,0),(0,s.jsxs)("div",{className:"w-full space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-4 flex-1",children:(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(h.p,{placeholder:"Search users by name, email, or phone...",value:m||"",onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 rounded-lg bg-background"})]})}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(x.l6,{value:o||"ALL",onValueChange:d,children:[(0,s.jsx)(x.bq,{className:"w-[180px] rounded-lg bg-background",children:(0,s.jsx)(x.yv,{placeholder:"Filter by role"})}),(0,s.jsxs)(x.gC,{children:[(0,s.jsx)(x.eb,{value:"ALL",children:"All Roles"}),n.map(e=>(0,s.jsx)(x.eb,{value:e.id,children:e.name},e.id))]})]})})]}),(0,s.jsx)("div",{className:"rounded-md border transition-opacity duration-300",children:f?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400"})}):(0,s.jsxs)(b.XI,{children:[(0,s.jsx)(b.A0,{children:(0,s.jsxs)(b.Hj,{children:[(0,s.jsx)(b.nd,{className:"w-12"}),(0,s.jsx)(b.nd,{children:"Name"}),(0,s.jsx)(b.nd,{children:"Email"}),(0,s.jsx)(b.nd,{children:"Phone"}),(0,s.jsx)(b.nd,{children:"Role"}),(0,s.jsx)(b.nd,{children:"Status"}),(0,s.jsx)(b.nd,{children:"Created"}),(0,s.jsx)(b.nd,{className:"w-24",children:"Actions"})]})}),(0,s.jsx)(b.BF,{children:0===e.results.length?(0,s.jsx)(b.Hj,{children:(0,s.jsx)(b.nA,{colSpan:8,className:"h-24 text-center",children:"No users found."})}):e.results.map(e=>(0,s.jsx)(v,{user:e,onEdit:u},e.id))})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.totalResults," ",1===e.totalResults?"user":"users"," ","total"]}),t>1&&(0,s.jsx)(g.A,{currentPage:r,totalPages:t,onPageChange:a,activeClassName:"bg-blue-500 text-white hover:bg-blue-600",prevLabel:"Prev",nextLabel:"Next",delta:1})]})]})}v.displayName="UserRow";var _=e=>"checkbox"===e.type,w=e=>e instanceof Date,A=e=>null==e;let V=e=>"object"==typeof e;var N=e=>!A(e)&&!Array.isArray(e)&&V(e)&&!w(e),F=e=>N(e)&&e.target?_(e.target)?e.target.checked:e.target.value:e,S=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,k=(e,r)=>e.has(S(r)),C=e=>{let r=e.constructor&&e.constructor.prototype;return N(r)&&r.hasOwnProperty("isPrototypeOf")},E="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function D(e){let r;let t=Array.isArray(e),s="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(!(E&&(e instanceof Blob||s))&&(t||N(e))))return e;else if(r=t?[]:{},t||C(e))for(let t in e)e.hasOwnProperty(t)&&(r[t]=D(e[t]));else r=e;return r}var L=e=>Array.isArray(e)?e.filter(Boolean):[],P=e=>void 0===e,U=(e,r,t)=>{if(!r||!N(e))return t;let s=L(r.split(/[,[\].]+?/)).reduce((e,r)=>A(e)?e:e[r],e);return P(s)||s===e?P(e[r])?t:e[r]:s},O=e=>"boolean"==typeof e,R=e=>/^\w*$/.test(e),q=e=>L(e.replace(/["|']|\]/g,"").split(/\.|\[/)),T=(e,r,t)=>{let s=-1,a=R(r)?[r]:q(r),i=a.length,l=i-1;for(;++s<i;){let r=a[s],i=t;if(s!==l){let t=e[r];i=N(t)||Array.isArray(t)?t:isNaN(+a[s+1])?{}:[]}if("__proto__"===r||"constructor"===r||"prototype"===r)return;e[r]=i,e=e[r]}};let M={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},I={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},B={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},$=c.createContext(null),H=()=>c.useContext($);var G=(e,r,t,s=!0)=>{let a={defaultValues:r._defaultValues};for(let i in e)Object.defineProperty(a,i,{get:()=>(r._proxyFormState[i]!==I.all&&(r._proxyFormState[i]=!s||I.all),t&&(t[i]=!0),e[i])});return a};let z="undefined"!=typeof window?c.useLayoutEffect:c.useEffect;var W=e=>"string"==typeof e,Y=(e,r,t,s,a)=>W(e)?(s&&r.watch.add(e),U(t,e,a)):Array.isArray(e)?e.map(e=>(s&&r.watch.add(e),U(t,e))):(s&&(r.watchAll=!0),t);let X=e=>e.render(function(e){let r=H(),{name:t,disabled:s,control:a=r.control,shouldUnregister:i}=e,l=k(a._names.array,t),n=function(e){let r=H(),{control:t=r.control,name:s,defaultValue:a,disabled:i,exact:l}=e||{},n=c.useRef(a),[o,d]=c.useState(t._getWatch(s,n.current));return z(()=>t._subscribe({name:s,formState:{values:!0},exact:l,callback:e=>!i&&d(Y(s,t._names,e.values||t._formValues,!1,n.current))}),[s,t,i,l]),c.useEffect(()=>t._removeUnmounted()),o}({control:a,name:t,defaultValue:U(a._formValues,t,U(a._defaultValues,t,e.defaultValue)),exact:!0}),o=function(e){let r=H(),{control:t=r.control,disabled:s,name:a,exact:i}=e||{},[l,n]=c.useState(t._formState),o=c.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return z(()=>t._subscribe({name:a,formState:o.current,exact:i,callback:e=>{s||n({...t._formState,...e})}}),[a,s,i]),c.useEffect(()=>{o.current.isValid&&t._setValid(!0)},[t]),c.useMemo(()=>G(l,t,o.current,!1),[l,t])}({control:a,name:t,exact:!0}),d=c.useRef(e),u=c.useRef(a.register(t,{...e.rules,value:n,...O(e.disabled)?{disabled:e.disabled}:{}})),f=c.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!U(o.errors,t)},isDirty:{enumerable:!0,get:()=>!!U(o.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!U(o.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!U(o.validatingFields,t)},error:{enumerable:!0,get:()=>U(o.errors,t)}}),[o,t]),m=c.useCallback(e=>u.current.onChange({target:{value:F(e),name:t},type:M.CHANGE}),[t]),h=c.useCallback(()=>u.current.onBlur({target:{value:U(a._formValues,t),name:t},type:M.BLUR}),[t,a._formValues]),p=c.useCallback(e=>{let r=U(a._fields,t);r&&e&&(r._f.ref=e)},[a._fields,t]),y=c.useMemo(()=>({name:t,value:n,...O(s)||o.disabled?{disabled:o.disabled||s}:{},onChange:m,onBlur:h,ref:p}),[t,s,o.disabled,m,h,p,n]);return c.useEffect(()=>{let e=a._options.shouldUnregister||i;a.register(t,{...d.current.rules,...O(d.current.disabled)?{disabled:d.current.disabled}:{}});let r=(e,r)=>{let t=U(a._fields,e);t&&t._f&&(t._f.mount=r)};if(r(t,!0),e){let e=D(U(a._options.defaultValues,t));T(a._defaultValues,t,e),P(U(a._formValues,t))&&T(a._formValues,t,e)}return l||a.register(t),()=>{(l?e&&!a._state.action:e)?a.unregister(t):r(t,!1)}},[t,a,l,i]),c.useEffect(()=>{a._setDisabledField({disabled:s,name:t})},[s,t,a]),c.useMemo(()=>({field:y,formState:o,fieldState:f}),[y,o,f])}(e));var J=(e,r,t,s,a)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{},Z=e=>Array.isArray(e)?e:[e],K=()=>{let e=[];return{get observers(){return e},next:r=>{for(let t of e)t.next&&t.next(r)},subscribe:r=>(e.push(r),{unsubscribe:()=>{e=e.filter(e=>e!==r)}}),unsubscribe:()=>{e=[]}}},Q=e=>A(e)||!V(e);function ee(e,r){if(Q(e)||Q(r))return e===r;if(w(e)&&w(r))return e.getTime()===r.getTime();let t=Object.keys(e),s=Object.keys(r);if(t.length!==s.length)return!1;for(let a of t){let t=e[a];if(!s.includes(a))return!1;if("ref"!==a){let e=r[a];if(w(t)&&w(e)||N(t)&&N(e)||Array.isArray(t)&&Array.isArray(e)?!ee(t,e):t!==e)return!1}}return!0}var er=e=>N(e)&&!Object.keys(e).length,et=e=>"file"===e.type,es=e=>"function"==typeof e,ea=e=>{if(!E)return!1;let r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},ei=e=>"select-multiple"===e.type,el=e=>"radio"===e.type,en=e=>el(e)||_(e),eo=e=>ea(e)&&e.isConnected;function ed(e,r){let t=Array.isArray(r)?r:R(r)?[r]:q(r),s=1===t.length?e:function(e,r){let t=r.slice(0,-1).length,s=0;for(;s<t;)e=P(e)?s++:e[r[s++]];return e}(e,t),a=t.length-1,i=t[a];return s&&delete s[i],0!==a&&(N(s)&&er(s)||Array.isArray(s)&&function(e){for(let r in e)if(e.hasOwnProperty(r)&&!P(e[r]))return!1;return!0}(s))&&ed(e,t.slice(0,-1)),e}var eu=e=>{for(let r in e)if(es(e[r]))return!0;return!1};function ec(e,r={}){let t=Array.isArray(e);if(N(e)||t)for(let t in e)Array.isArray(e[t])||N(e[t])&&!eu(e[t])?(r[t]=Array.isArray(e[t])?[]:{},ec(e[t],r[t])):A(e[t])||(r[t]=!0);return r}var ef=(e,r)=>(function e(r,t,s){let a=Array.isArray(r);if(N(r)||a)for(let a in r)Array.isArray(r[a])||N(r[a])&&!eu(r[a])?P(t)||Q(s[a])?s[a]=Array.isArray(r[a])?ec(r[a],[]):{...ec(r[a])}:e(r[a],A(t)?{}:t[a],s[a]):s[a]=!ee(r[a],t[a]);return s})(e,r,ec(r));let em={value:!1,isValid:!1},eh={value:!0,isValid:!0};var ep=e=>{if(Array.isArray(e)){if(e.length>1){let r=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!P(e[0].attributes.value)?P(e[0].value)||""===e[0].value?eh:{value:e[0].value,isValid:!0}:eh:em}return em},ey=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:s})=>P(e)?e:r?""===e?NaN:e?+e:e:t&&W(e)?new Date(e):s?s(e):e;let ex={isValid:!1,value:null};var eg=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,ex):ex;function eb(e){let r=e.ref;return et(r)?r.files:el(r)?eg(e.refs).value:ei(r)?[...r.selectedOptions].map(({value:e})=>e):_(r)?ep(e.refs).value:ey(P(r.value)?e.ref.value:r.value,e)}var ev=(e,r,t,s)=>{let a={};for(let t of e){let e=U(r,t);e&&T(a,t,e._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}},ej=e=>e instanceof RegExp,e_=e=>P(e)?e:ej(e)?e.source:N(e)?ej(e.value)?e.value.source:e.value:e,ew=e=>({isOnSubmit:!e||e===I.onSubmit,isOnBlur:e===I.onBlur,isOnChange:e===I.onChange,isOnAll:e===I.all,isOnTouch:e===I.onTouched});let eA="AsyncFunction";var eV=e=>!!e&&!!e.validate&&!!(es(e.validate)&&e.validate.constructor.name===eA||N(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===eA)),eN=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),eF=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));let eS=(e,r,t,s)=>{for(let a of t||Object.keys(e)){let t=U(e,a);if(t){let{_f:e,...i}=t;if(e){if(e.refs&&e.refs[0]&&r(e.refs[0],a)&&!s||e.ref&&r(e.ref,e.name)&&!s)return!0;if(eS(i,r))break}else if(N(i)&&eS(i,r))break}}};function ek(e,r,t){let s=U(e,t);if(s||R(t))return{error:s,name:t};let a=t.split(".");for(;a.length;){let s=a.join("."),i=U(r,s),l=U(e,s);if(i&&!Array.isArray(i)&&t!==s)break;if(l&&l.type)return{name:s,error:l};a.pop()}return{name:t}}var eC=(e,r,t,s)=>{t(e);let{name:a,...i}=e;return er(i)||Object.keys(i).length>=Object.keys(r).length||Object.keys(i).find(e=>r[e]===(!s||I.all))},eE=(e,r,t)=>!e||!r||e===r||Z(e).some(e=>e&&(t?e===r:e.startsWith(r)||r.startsWith(e))),eD=(e,r,t,s,a)=>!a.isOnAll&&(!t&&a.isOnTouch?!(r||e):(t?s.isOnBlur:a.isOnBlur)?!e:(t?!s.isOnChange:!a.isOnChange)||e),eL=(e,r)=>!L(U(e,r)).length&&ed(e,r),eP=(e,r,t)=>{let s=Z(U(e,t));return T(s,"root",r[t]),T(e,t,s),e},eU=e=>W(e);function eO(e,r,t="validate"){if(eU(e)||Array.isArray(e)&&e.every(eU)||O(e)&&!e)return{type:t,message:eU(e)?e:"",ref:r}}var eR=e=>N(e)&&!ej(e)?e:{value:e,message:""},eq=async(e,r,t,s,a,i)=>{let{ref:l,refs:n,required:o,maxLength:d,minLength:u,min:c,max:f,pattern:m,validate:h,name:p,valueAsNumber:y,mount:x}=e._f,g=U(t,p);if(!x||r.has(p))return{};let b=n?n[0]:l,v=e=>{a&&b.reportValidity&&(b.setCustomValidity(O(e)?"":e||""),b.reportValidity())},j={},w=el(l),V=_(l),F=(y||et(l))&&P(l.value)&&P(g)||ea(l)&&""===l.value||""===g||Array.isArray(g)&&!g.length,S=J.bind(null,p,s,j),k=(e,r,t,s=B.maxLength,a=B.minLength)=>{let i=e?r:t;j[p]={type:e?s:a,message:i,ref:l,...S(e?s:a,i)}};if(i?!Array.isArray(g)||!g.length:o&&(!(w||V)&&(F||A(g))||O(g)&&!g||V&&!ep(n).isValid||w&&!eg(n).isValid)){let{value:e,message:r}=eU(o)?{value:!!o,message:o}:eR(o);if(e&&(j[p]={type:B.required,message:r,ref:b,...S(B.required,r)},!s))return v(r),j}if(!F&&(!A(c)||!A(f))){let e,r;let t=eR(f),a=eR(c);if(A(g)||isNaN(g)){let s=l.valueAsDate||new Date(g),i=e=>new Date(new Date().toDateString()+" "+e),n="time"==l.type,o="week"==l.type;W(t.value)&&g&&(e=n?i(g)>i(t.value):o?g>t.value:s>new Date(t.value)),W(a.value)&&g&&(r=n?i(g)<i(a.value):o?g<a.value:s<new Date(a.value))}else{let s=l.valueAsNumber||(g?+g:g);A(t.value)||(e=s>t.value),A(a.value)||(r=s<a.value)}if((e||r)&&(k(!!e,t.message,a.message,B.max,B.min),!s))return v(j[p].message),j}if((d||u)&&!F&&(W(g)||i&&Array.isArray(g))){let e=eR(d),r=eR(u),t=!A(e.value)&&g.length>+e.value,a=!A(r.value)&&g.length<+r.value;if((t||a)&&(k(t,e.message,r.message),!s))return v(j[p].message),j}if(m&&!F&&W(g)){let{value:e,message:r}=eR(m);if(ej(e)&&!g.match(e)&&(j[p]={type:B.pattern,message:r,ref:l,...S(B.pattern,r)},!s))return v(r),j}if(h){if(es(h)){let e=eO(await h(g,t),b);if(e&&(j[p]={...e,...S(B.validate,e.message)},!s))return v(e.message),j}else if(N(h)){let e={};for(let r in h){if(!er(e)&&!s)break;let a=eO(await h[r](g,t),b,r);a&&(e={...a,...S(r,a.message)},v(a.message),s&&(j[p]=e))}if(!er(e)&&(j[p]={ref:b,...e},!s))return j}}return v(!0),j};let eT={mode:I.onSubmit,reValidateMode:I.onChange,shouldFocusError:!0},eM=(e,r,t)=>{if(e&&"reportValidity"in e){let s=U(t,r);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},eI=(e,r)=>{for(let t in r.fields){let s=r.fields[t];s&&s.ref&&"reportValidity"in s.ref?eM(s.ref,t,e):s&&s.refs&&s.refs.forEach(r=>eM(r,t,e))}},eB=(e,r)=>{r.shouldUseNativeValidation&&eI(e,r);let t={};for(let s in e){let a=U(r.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(e$(r.names||Object.keys(e),s)){let e=Object.assign({},U(t,s));T(e,"root",i),T(t,s,e)}else T(t,s,i)}return t},e$=(e,r)=>{let t=eH(r);return e.some(e=>eH(e).match(`^${t}\\.\\d+`))};function eH(e){return e.replace(/\]|\[/g,"")}var eG=t(77543),ez=t(90672),eW=t(53523),eY=t(81427),eX=t(58916);let eJ=e=>{let{children:r,...t}=e;return c.createElement($.Provider,{value:t},r)},eZ=c.createContext({}),eK=({...e})=>(0,s.jsx)(eZ.Provider,{value:{name:e.name},children:(0,s.jsx)(X,{...e})}),eQ=()=>{let e=c.useContext(eZ),r=c.useContext(e0),{getFieldState:t,formState:s}=H(),a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},e0=c.createContext({}),e1=c.forwardRef(({className:e,...r},t)=>{let a=c.useId();return(0,s.jsx)(e0.Provider,{value:{id:a},children:(0,s.jsx)("div",{ref:t,className:(0,eY.cn)("space-y-2",e),...r})})});e1.displayName="FormItem";let e2=c.forwardRef(({className:e,...r},t)=>{let{error:a,formItemId:i}=eQ();return(0,s.jsx)(eX.J,{ref:t,className:(0,eY.cn)(a&&"text-destructive",e),htmlFor:i,...r})});e2.displayName="FormLabel";let e4=c.forwardRef(({...e},r)=>{let{error:t,formItemId:a,formDescriptionId:i,formMessageId:l}=eQ();return(0,s.jsx)(eW.DX,{ref:r,id:a,"aria-describedby":t?`${i} ${l}`:`${i}`,"aria-invalid":!!t,...e})});e4.displayName="FormControl",c.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:a}=eQ();return(0,s.jsx)("p",{ref:t,id:a,className:(0,eY.cn)("text-[0.8rem] text-muted-foreground",e),...r})}).displayName="FormDescription";let e5=c.forwardRef(({className:e,children:r,...t},a)=>{let{error:i,formMessageId:l}=eQ(),n=i?String(i?.message??""):r;return n?(0,s.jsx)("p",{ref:a,id:l,className:(0,eY.cn)("text-[0.8rem] font-medium text-destructive",e),...t,children:n}):null});e5.displayName="FormMessage";var e7=t(80436);let e3=eG.Ik({firstName:eG.Yj().min(1,"First name is required"),lastName:eG.Yj().min(1,"Last name is required"),phoneNumber:eG.Yj().min(10,"Phone number must be at least 10 digits"),roleId:eG.Yj().uuid("Please select a valid role"),email:eG.Yj().email("Invalid email address").optional(),password:eG.Yj().min(8,"Password must be at least 8 characters").optional()});function e8({open:e,onOpenChange:r,onSubmit:t,mode:a="add",initialData:l}){var n;let{data:o,isLoading:d,error:u}=(0,f.ZA)(),[m,p]=(0,c.useState)(!1),y=function(e={}){let r=c.useRef(void 0),t=c.useRef(void 0),[s,a]=c.useState({isDirty:!1,isValidating:!1,isLoading:es(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:es(e.defaultValues)?void 0:e.defaultValues});!r.current&&(r.current={...e.formControl?e.formControl:function(e={}){let r,t={...eT,...e},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:es(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},i=(N(t.defaultValues)||N(t.values))&&D(t.defaultValues||t.values)||{},l=t.shouldUnregister?{}:D(i),n={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},c={...u},f={array:K(),state:K()},m=ew(t.mode),h=ew(t.reValidateMode),p=t.criteriaMode===I.all,y=e=>r=>{clearTimeout(d),d=setTimeout(e,r)},x=async e=>{if(!t.disabled&&(u.isValid||c.isValid||e)){let e=t.resolver?er((await S()).errors):await R(a,!0);e!==s.isValid&&f.state.next({isValid:e})}},g=(e,r)=>{!t.disabled&&(u.isValidating||u.validatingFields||c.isValidating||c.validatingFields)&&((e||Array.from(o.mount)).forEach(e=>{e&&(r?T(s.validatingFields,e,r):ed(s.validatingFields,e))}),f.state.next({validatingFields:s.validatingFields,isValidating:!er(s.validatingFields)}))},b=(e,r)=>{T(s.errors,e,r),f.state.next({errors:s.errors})},v=(e,r,t,s)=>{let o=U(a,e);if(o){let a=U(l,e,P(t)?U(i,e):t);P(a)||s&&s.defaultChecked||r?T(l,e,r?a:eb(o._f)):$(e,a),n.mount&&x()}},j=(e,r,a,l,n)=>{let o=!1,d=!1,m={name:e};if(!t.disabled){if(!a||l){(u.isDirty||c.isDirty)&&(d=s.isDirty,s.isDirty=m.isDirty=q(),o=d!==m.isDirty);let t=ee(U(i,e),r);d=!!U(s.dirtyFields,e),t?ed(s.dirtyFields,e):T(s.dirtyFields,e,!0),m.dirtyFields=s.dirtyFields,o=o||(u.dirtyFields||c.dirtyFields)&&!t!==d}if(a){let r=U(s.touchedFields,e);r||(T(s.touchedFields,e,a),m.touchedFields=s.touchedFields,o=o||(u.touchedFields||c.touchedFields)&&r!==a)}o&&n&&f.state.next(m)}return o?m:{}},V=(e,a,i,l)=>{let n=U(s.errors,e),o=(u.isValid||c.isValid)&&O(a)&&s.isValid!==a;if(t.delayError&&i?(r=y(()=>b(e,i)))(t.delayError):(clearTimeout(d),r=null,i?T(s.errors,e,i):ed(s.errors,e)),(i?!ee(n,i):n)||!er(l)||o){let r={...l,...o&&O(a)?{isValid:a}:{},errors:s.errors,name:e};s={...s,...r},f.state.next(r)}},S=async e=>{g(e,!0);let r=await t.resolver(l,t.context,ev(e||o.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return g(e),r},C=async e=>{let{errors:r}=await S(e);if(e)for(let t of e){let e=U(r,t);e?T(s.errors,t,e):ed(s.errors,t)}else s.errors=r;return r},R=async(e,r,a={valid:!0})=>{for(let i in e){let n=e[i];if(n){let{_f:e,...d}=n;if(e){let d=o.array.has(e.name),c=n._f&&eV(n._f);c&&u.validatingFields&&g([i],!0);let f=await eq(n,o.disabled,l,p,t.shouldUseNativeValidation&&!r,d);if(c&&u.validatingFields&&g([i]),f[e.name]&&(a.valid=!1,r))break;r||(U(f,e.name)?d?eP(s.errors,f,e.name):T(s.errors,e.name,f[e.name]):ed(s.errors,e.name))}er(d)||await R(d,r,a)}}return a.valid},q=(e,r)=>!t.disabled&&(e&&r&&T(l,e,r),!ee(Q(),i)),B=(e,r,t)=>Y(e,o,{...n.mount?l:P(r)?i:W(e)?{[e]:r}:r},t,r),$=(e,r,t={})=>{let s=U(a,e),i=r;if(s){let t=s._f;t&&(t.disabled||T(l,e,ey(r,t)),i=ea(t.ref)&&A(r)?"":r,ei(t.ref)?[...t.ref.options].forEach(e=>e.selected=i.includes(e.value)):t.refs?_(t.ref)?t.refs.length>1?t.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find(r=>r===e.value):i===e.value)):t.refs[0]&&(t.refs[0].checked=!!i):t.refs.forEach(e=>e.checked=e.value===i):et(t.ref)?t.ref.value="":(t.ref.value=i,t.ref.type||f.state.next({name:e,values:D(l)})))}(t.shouldDirty||t.shouldTouch)&&j(e,i,t.shouldTouch,t.shouldDirty,!0),t.shouldValidate&&J(e)},H=(e,r,t)=>{for(let s in r){let i=r[s],l=`${e}.${s}`,n=U(a,l);(o.array.has(e)||N(i)||n&&!n._f)&&!w(i)?H(l,i,t):$(l,i,t)}},G=(e,r,t={})=>{let d=U(a,e),m=o.array.has(e),h=D(r);T(l,e,h),m?(f.array.next({name:e,values:D(l)}),(u.isDirty||u.dirtyFields||c.isDirty||c.dirtyFields)&&t.shouldDirty&&f.state.next({name:e,dirtyFields:ef(i,l),isDirty:q(e,h)})):!d||d._f||A(h)?$(e,h,t):H(e,h,t),eF(e,o)&&f.state.next({...s}),f.state.next({name:n.mount?e:void 0,values:D(l)})},z=async e=>{n.mount=!0;let i=e.target,d=i.name,y=!0,b=U(a,d),v=e=>{y=Number.isNaN(e)||w(e)&&isNaN(e.getTime())||ee(e,U(l,d,e))};if(b){let n,_;let w=i.type?eb(b._f):F(e),A=e.type===M.BLUR||e.type===M.FOCUS_OUT,N=!eN(b._f)&&!t.resolver&&!U(s.errors,d)&&!b._f.deps||eD(A,U(s.touchedFields,d),s.isSubmitted,h,m),k=eF(d,o,A);T(l,d,w),A?(b._f.onBlur&&b._f.onBlur(e),r&&r(0)):b._f.onChange&&b._f.onChange(e);let C=j(d,w,A),E=!er(C)||k;if(A||f.state.next({name:d,type:e.type,values:D(l)}),N)return(u.isValid||c.isValid)&&("onBlur"===t.mode?A&&x():A||x()),E&&f.state.next({name:d,...k?{}:C});if(!A&&k&&f.state.next({...s}),t.resolver){let{errors:e}=await S([d]);if(v(w),y){let r=ek(s.errors,a,d),t=ek(e,a,r.name||d);n=t.error,d=t.name,_=er(e)}}else g([d],!0),n=(await eq(b,o.disabled,l,p,t.shouldUseNativeValidation))[d],g([d]),v(w),y&&(n?_=!1:(u.isValid||c.isValid)&&(_=await R(a,!0)));y&&(b._f.deps&&J(b._f.deps),V(d,_,n,C))}},X=(e,r)=>{if(U(s.errors,r)&&e.focus)return e.focus(),1},J=async(e,r={})=>{let i,l;let n=Z(e);if(t.resolver){let r=await C(P(e)?e:n);i=er(r),l=e?!n.some(e=>U(r,e)):i}else e?((l=(await Promise.all(n.map(async e=>{let r=U(a,e);return await R(r&&r._f?{[e]:r}:r)}))).every(Boolean))||s.isValid)&&x():l=i=await R(a);return f.state.next({...!W(e)||(u.isValid||c.isValid)&&i!==s.isValid?{}:{name:e},...t.resolver||!e?{isValid:i}:{},errors:s.errors}),r.shouldFocus&&!l&&eS(a,X,e?n:o.mount),l},Q=e=>{let r={...n.mount?l:i};return P(e)?r:W(e)?U(r,e):e.map(e=>U(r,e))},el=(e,r)=>({invalid:!!U((r||s).errors,e),isDirty:!!U((r||s).dirtyFields,e),error:U((r||s).errors,e),isValidating:!!U(s.validatingFields,e),isTouched:!!U((r||s).touchedFields,e)}),eu=(e,r,t)=>{let i=(U(a,e,{_f:{}})._f||{}).ref,{ref:l,message:n,type:o,...d}=U(s.errors,e)||{};T(s.errors,e,{...d,...r,ref:i}),f.state.next({name:e,errors:s.errors,isValid:!1}),t&&t.shouldFocus&&i&&i.focus&&i.focus()},ec=e=>f.state.subscribe({next:r=>{eE(e.name,r.name,e.exact)&&eC(r,e.formState||u,eU,e.reRenderRoot)&&e.callback({values:{...l},...s,...r})}}).unsubscribe,em=(e,r={})=>{for(let n of e?Z(e):o.mount)o.mount.delete(n),o.array.delete(n),r.keepValue||(ed(a,n),ed(l,n)),r.keepError||ed(s.errors,n),r.keepDirty||ed(s.dirtyFields,n),r.keepTouched||ed(s.touchedFields,n),r.keepIsValidating||ed(s.validatingFields,n),t.shouldUnregister||r.keepDefaultValue||ed(i,n);f.state.next({values:D(l)}),f.state.next({...s,...r.keepDirty?{isDirty:q()}:{}}),r.keepIsValid||x()},eh=({disabled:e,name:r})=>{(O(e)&&n.mount||e||o.disabled.has(r))&&(e?o.disabled.add(r):o.disabled.delete(r))},ep=(e,r={})=>{let s=U(a,e),l=O(r.disabled)||O(t.disabled);return T(a,e,{...s||{},_f:{...s&&s._f?s._f:{ref:{name:e}},name:e,mount:!0,...r}}),o.mount.add(e),s?eh({disabled:O(r.disabled)?r.disabled:t.disabled,name:e}):v(e,!0,r.value),{...l?{disabled:r.disabled||t.disabled}:{},...t.progressive?{required:!!r.required,min:e_(r.min),max:e_(r.max),minLength:e_(r.minLength),maxLength:e_(r.maxLength),pattern:e_(r.pattern)}:{},name:e,onChange:z,onBlur:z,ref:l=>{if(l){ep(e,r),s=U(a,e);let t=P(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,n=en(t),o=s._f.refs||[];(n?o.find(e=>e===t):t===s._f.ref)||(T(a,e,{_f:{...s._f,...n?{refs:[...o.filter(eo),t,...Array.isArray(U(i,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),v(e,!1,void 0,t))}else(s=U(a,e,{}))._f&&(s._f.mount=!1),(t.shouldUnregister||r.shouldUnregister)&&!(k(o.array,e)&&n.action)&&o.unMount.add(e)}}},ex=()=>t.shouldFocusError&&eS(a,X,o.mount),eg=(e,r)=>async i=>{let n;i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist());let d=D(l);if(f.state.next({isSubmitting:!0}),t.resolver){let{errors:e,values:r}=await S();s.errors=e,d=r}else await R(a);if(o.disabled.size)for(let e of o.disabled)T(d,e,void 0);if(ed(s.errors,"root"),er(s.errors)){f.state.next({errors:{}});try{await e(d,i)}catch(e){n=e}}else r&&await r({...s.errors},i),ex(),setTimeout(ex);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:er(s.errors)&&!n,submitCount:s.submitCount+1,errors:s.errors}),n)throw n},ej=(e,r={})=>{let d=e?D(e):i,c=D(d),m=er(e),h=m?i:c;if(r.keepDefaultValues||(i=d),!r.keepValues){if(r.keepDirtyValues)for(let e of Array.from(new Set([...o.mount,...Object.keys(ef(i,l))])))U(s.dirtyFields,e)?T(h,e,U(l,e)):G(e,U(h,e));else{if(E&&P(e))for(let e of o.mount){let r=U(a,e);if(r&&r._f){let e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;if(ea(e)){let r=e.closest("form");if(r){r.reset();break}}}}for(let e of o.mount)G(e,U(h,e))}l=D(h),f.array.next({values:{...h}}),f.state.next({values:{...h}})}o={mount:r.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!u.isValid||!!r.keepIsValid||!!r.keepDirtyValues,n.watch=!!t.shouldUnregister,f.state.next({submitCount:r.keepSubmitCount?s.submitCount:0,isDirty:!m&&(r.keepDirty?s.isDirty:!!(r.keepDefaultValues&&!ee(e,i))),isSubmitted:!!r.keepIsSubmitted&&s.isSubmitted,dirtyFields:m?{}:r.keepDirtyValues?r.keepDefaultValues&&l?ef(i,l):s.dirtyFields:r.keepDefaultValues&&e?ef(i,e):r.keepDirty?s.dirtyFields:{},touchedFields:r.keepTouched?s.touchedFields:{},errors:r.keepErrors?s.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&s.isSubmitSuccessful,isSubmitting:!1})},eA=(e,r)=>ej(es(e)?e(l):e,r),eU=e=>{s={...s,...e}},eO={control:{register:ep,unregister:em,getFieldState:el,handleSubmit:eg,setError:eu,_subscribe:ec,_runSchema:S,_getWatch:B,_getDirty:q,_setValid:x,_setFieldArray:(e,r=[],o,d,m=!0,h=!0)=>{if(d&&o&&!t.disabled){if(n.action=!0,h&&Array.isArray(U(a,e))){let r=o(U(a,e),d.argA,d.argB);m&&T(a,e,r)}if(h&&Array.isArray(U(s.errors,e))){let r=o(U(s.errors,e),d.argA,d.argB);m&&T(s.errors,e,r),eL(s.errors,e)}if((u.touchedFields||c.touchedFields)&&h&&Array.isArray(U(s.touchedFields,e))){let r=o(U(s.touchedFields,e),d.argA,d.argB);m&&T(s.touchedFields,e,r)}(u.dirtyFields||c.dirtyFields)&&(s.dirtyFields=ef(i,l)),f.state.next({name:e,isDirty:q(e,r),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else T(l,e,r)},_setDisabledField:eh,_setErrors:e=>{s.errors=e,f.state.next({errors:s.errors,isValid:!1})},_getFieldArray:e=>L(U(n.mount?l:i,e,t.shouldUnregister?U(i,e,[]):[])),_reset:ej,_resetDefaultValues:()=>es(t.defaultValues)&&t.defaultValues().then(e=>{eA(e,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(let e of o.unMount){let r=U(a,e);r&&(r._f.refs?r._f.refs.every(e=>!eo(e)):!eo(r._f.ref))&&em(e)}o.unMount=new Set},_disableForm:e=>{O(e)&&(f.state.next({disabled:e}),eS(a,(r,t)=>{let s=U(a,t);s&&(r.disabled=s._f.disabled||e,Array.isArray(s._f.refs)&&s._f.refs.forEach(r=>{r.disabled=s._f.disabled||e}))},0,!1))},_subjects:f,_proxyFormState:u,get _fields(){return a},get _formValues(){return l},get _state(){return n},set _state(value){n=value},get _defaultValues(){return i},get _names(){return o},set _names(value){o=value},get _formState(){return s},get _options(){return t},set _options(value){t={...t,...value}}},subscribe:e=>(n.mount=!0,c={...c,...e.formState},ec({...e,formState:c})),trigger:J,register:ep,handleSubmit:eg,watch:(e,r)=>es(e)?f.state.subscribe({next:t=>e(B(void 0,r),t)}):B(e,r,!0),setValue:G,getValues:Q,reset:eA,resetField:(e,r={})=>{U(a,e)&&(P(r.defaultValue)?G(e,D(U(i,e))):(G(e,r.defaultValue),T(i,e,D(r.defaultValue))),r.keepTouched||ed(s.touchedFields,e),r.keepDirty||(ed(s.dirtyFields,e),s.isDirty=r.defaultValue?q(e,D(U(i,e))):q()),!r.keepError&&(ed(s.errors,e),u.isValid&&x()),f.state.next({...s}))},clearErrors:e=>{e&&Z(e).forEach(e=>ed(s.errors,e)),f.state.next({errors:e?s.errors:{}})},unregister:em,setError:eu,setFocus:(e,r={})=>{let t=U(a,e),s=t&&t._f;if(s){let e=s.refs?s.refs[0]:s.ref;e.focus&&(e.focus(),r.shouldSelect&&es(e.select)&&e.select())}},getFieldState:el};return{...eO,formControl:eO}}(e),formState:s},e.formControl&&e.defaultValues&&!es(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let i=r.current.control;return i._options=e,z(()=>{let e=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(e=>({...e,isReady:!0})),i._formState.isReady=!0,e},[i]),c.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),c.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode),e.errors&&!er(e.errors)&&i._setErrors(e.errors)},[i,e.errors,e.mode,e.reValidateMode]),c.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),c.useEffect(()=>{if(i._proxyFormState.isDirty){let e=i._getDirty();e!==s.isDirty&&i._subjects.state.next({isDirty:e})}},[i,s.isDirty]),c.useEffect(()=>{e.values&&!ee(e.values,t.current)?(i._reset(e.values,i._options.resetOptions),t.current=e.values,a(e=>({...e}))):i._resetDefaultValues()},[i,e.values]),c.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),r.current.formState=G(s,i),r.current}({resolver:(void 0===n&&(n={}),function(e,r,t){try{return Promise.resolve(function(r,s){try{var a=Promise.resolve(e3["sync"===n.mode?"parse":"parseAsync"](e,void 0)).then(function(r){return t.shouldUseNativeValidation&&eI({},t),{errors:{},values:n.raw?Object.assign({},e):r}})}catch(e){return s(e)}return a&&a.then?a.then(void 0,s):a}(0,function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:eB(function(e,r){for(var t={};e.length;){var s=e[0],a=s.code,i=s.message,l=s.path.join(".");if(!t[l]){if("unionErrors"in s){var n=s.unionErrors[0].errors[0];t[l]={message:n.message,type:n.code}}else t[l]={message:i,type:a}}if("unionErrors"in s&&s.unionErrors.forEach(function(r){return r.errors.forEach(function(r){return e.push(r)})}),r){var o=t[l].types,d=o&&o[s.code];t[l]=J(l,r,t,a,d?[].concat(d,s.message):s.message)}e.shift()}return t}(e.errors,!t.shouldUseNativeValidation&&"all"===t.criteriaMode),t)};throw e}))}catch(e){return Promise.reject(e)}}),defaultValues:{firstName:l?.firstName||"",lastName:l?.lastName||"",phoneNumber:l?.phoneNumber||"",roleId:l?.roleId||"",email:"",password:""}}),g=async e=>{try{p(!0);let s="edit"===a?{firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,roleId:e.roleId}:e;await t(s),"add"===a&&y.reset(),r(!1)}catch(e){console.error("Error submitting form:",e)}finally{p(!1)}},b=o?.data||[];return(0,s.jsx)(ez.lG,{open:e,onOpenChange:r,children:(0,s.jsxs)(ez.Cf,{children:[(0,s.jsx)(ez.c7,{children:(0,s.jsx)(ez.L3,{children:"add"===a?"Add New User":"Edit User"})}),(0,s.jsx)(eJ,{...y,children:(0,s.jsxs)("form",{onSubmit:y.handleSubmit(g),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(eK,{control:y.control,name:"firstName",render:({field:e})=>(0,s.jsxs)(e1,{children:[(0,s.jsx)(e2,{children:"First Name"}),(0,s.jsx)(e4,{children:(0,s.jsx)(h.p,{placeholder:"Enter first name",...e})}),(0,s.jsx)(e5,{})]})}),(0,s.jsx)(eK,{control:y.control,name:"lastName",render:({field:e})=>(0,s.jsxs)(e1,{children:[(0,s.jsx)(e2,{children:"Last Name"}),(0,s.jsx)(e4,{children:(0,s.jsx)(h.p,{placeholder:"Enter last name",...e})}),(0,s.jsx)(e5,{})]})})]}),(0,s.jsx)(eK,{control:y.control,name:"phoneNumber",render:({field:e})=>(0,s.jsxs)(e1,{children:[(0,s.jsx)(e2,{children:"Phone Number"}),(0,s.jsx)(e4,{children:(0,s.jsx)(h.p,{placeholder:"Enter phone number",...e})}),(0,s.jsx)(e5,{})]})}),(0,s.jsx)(eK,{control:y.control,name:"roleId",render:({field:e})=>(0,s.jsxs)(e1,{children:[(0,s.jsx)(e2,{children:"Role"}),(0,s.jsxs)(x.l6,{onValueChange:e.onChange,value:e.value,disabled:d,children:[(0,s.jsx)(e4,{children:(0,s.jsx)(x.bq,{children:(0,s.jsx)(x.yv,{placeholder:d?"Loading roles...":"Select a role"})})}),(0,s.jsx)(x.gC,{children:d?(0,s.jsx)("div",{className:"p-2 text-center",children:"Loading roles..."}):u?(0,s.jsx)("div",{className:"p-2 text-center text-red-500",children:"Error loading roles"}):0===b.length?(0,s.jsx)("div",{className:"p-2 text-center",children:"No roles available"}):b.map(e=>(0,s.jsx)(x.eb,{value:e.id,children:e.name},e.id))})]}),(0,s.jsx)(e5,{})]})}),"add"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eK,{control:y.control,name:"email",render:({field:e})=>(0,s.jsxs)(e1,{children:[(0,s.jsx)(e2,{children:"Email"}),(0,s.jsx)(e4,{children:(0,s.jsx)(h.p,{placeholder:"Enter email",type:"email",...e})}),(0,s.jsx)(e5,{})]})}),(0,s.jsx)(eK,{control:y.control,name:"password",render:({field:e})=>(0,s.jsxs)(e1,{children:[(0,s.jsx)(e2,{children:"Password"}),(0,s.jsx)(e4,{children:(0,s.jsx)(h.p,{placeholder:"Enter password",type:"password",...e})}),(0,s.jsx)(e5,{})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,s.jsx)(i.$,{variant:"outline",type:"button",onClick:()=>r(!1),disabled:m,children:"Cancel"}),(0,s.jsx)(i.$,{type:"submit",disabled:m,children:m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e7.A,{className:"mr-2 h-4 w-4 animate-spin"}),"add"===a?"Creating...":"Updating..."]}):"add"===a?"Create User":"Update User"})]})]})})]})})}var e6=t(65357);let e9=()=>{let[e,r]=(0,c.useState)(1),[t,m]=(0,c.useState)(""),[h,p]=(0,c.useState)("ALL"),[y,x]=(0,c.useState)(0),[g,b]=(0,c.useState)(null),{data:v,isLoading:_,error:w,refetch:A}=(0,f.kp)({page:e,limit:20,searchTerm:t,roleId:"ALL"!==h?h:void 0,refreshTrigger:y}),{data:V,isLoading:N,error:F}=(0,f.ZA)(),[S,k]=(0,c.useState)(!1),C=(0,f.Tk)(),E=(0,f.Qc)(),D=async e=>{if(g){let r=await E.mutateAsync({id:g.id,data:e});r?.success?e6.oR.success(r.message||"User updated successfully"):e6.oR.error(r?.message||"Failed to update user"),b(null)}else{let r=await C.mutateAsync(e);r.success?e6.oR.success(r.message||"User created successfully"):e6.oR.error(r.message||"Failed to create user")}};if(w)return(0,s.jsx)("p",{children:"Error fetching Users or no data available"});let L=v?.data??{page:1,limit:10,totalPages:1,totalResults:0,results:[]};return(0,s.jsx)(a.A,{scrollable:!1,children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)(l.D,{title:"Users",description:"Manage users"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(i.$,{variant:"outline",onClick:()=>{x(e=>e+1),A()},children:[(0,s.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,s.jsxs)(i.$,{variant:"outline",onClick:()=>{if(!v?.data)return;let e=v.data.results.map(e=>({id:e.id,name:`${e.firstName}  ${e.lastName}`,email:e.email,role:e.role?.name||"No Role",createdAt:new Date(e.createdAt).toLocaleDateString()})),r=new Blob([[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n")],{type:"text/csv"}),t=URL.createObjectURL(r),s=document.createElement("a");s.href=t,s.download=`users-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},disabled:0===L.results.length,children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,s.jsxs)(i.$,{variant:"outline",onClick:()=>k(!0),children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Add User"]}),(0,s.jsx)(e8,{open:S,onOpenChange:e=>{e||b(null),k(e)},onSubmit:D,mode:g?"edit":"add",initialData:g})]})]}),(0,s.jsx)(n.Separator,{}),(0,s.jsx)(j,{users:L,currentPage:e,totalPages:L.totalPages,onPageChange:r,searchTerm:t,onSearchTermChange:m,roles:V?.data??[],selectedRoleId:h,onRoleChange:e=>{p(e),r(1)},onEdit:e=>{b(e),k(!0)}})]})})}},58916:(e,r,t)=>{"use strict";t.d(r,{J:()=>d});var s=t(35422),a=t(20719),i=t(11767),l=t(59225),n=t(81427);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(i.b,{ref:t,className:(0,n.cn)(o(),e),...r}));d.displayName=i.b.displayName},17833:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(65002).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/iannjoroge/dummy/hikdigitalmart_admin/src/app/(main)/dashboard/user/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/iannjoroge/dummy/hikdigitalmart_admin/src/app/(main)/dashboard/user/page.tsx","default")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[934,395,371,69,710,692,654,665,302,587,496,803,228],()=>t(53963));module.exports=s})();