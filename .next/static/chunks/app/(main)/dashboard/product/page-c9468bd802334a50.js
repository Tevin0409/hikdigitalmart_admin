(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8008],{34173:(e,s,r)=>{Promise.resolve().then(r.bind(r,82599))},82599:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>H});var a=r(51047),l=r(76847),t=r(15343),n=r(18062),i=r(39077),d=r(43530),c=r(92784),o=r(30473),u=r(53217),x=r(66368),m=r(20642),h=r(70779),p=r(1015),j=r(71386),g=r(75186),v=r(33592),f=r(35672);let y=(0,f.createServerReference)("4099c254e85d4584d539cfa8a0441a654b5ea67c14",f.callServer,void 0,f.findSourceMapURL,"bulkUploadProducts");var b=r(89039);function N(){let[e,s]=(0,l.useState)(!1),[r,t]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),[d,f]=(0,l.useState)(null),N=()=>{t(null),f(null),i(!1)},C=()=>{N(),s(!1)},w=(0,l.useCallback)(e=>{let s=e[0];s&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===s.type?(t(s),f(null)):f("Invalid file format. Please upload a .xlsx Excel file.")},[]),{getRootProps:S,getInputProps:k}=(0,o.VB)({onDrop:w,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},maxSize:5242880,onDropRejected:()=>{f("File too large or unsupported format. Maximum allowed size is 5MB.")}}),F=async()=>{if(!r)return;i(!0),f(null);let e=new FormData;e.append("file",r);try{let s=await y(e);if(!s.success){f(s.message||"Upload failed. Please try again later.");return}C()}catch(e){console.error("Upload failed:",e),f((null==e?void 0:e.message)||"An unexpected error occurred.")}finally{i(!1)}};return(0,a.jsxs)(x.lG,{open:e,onOpenChange:s,children:[(0,a.jsx)(x.zM,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"outline",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Bulk Upload"]})}),(0,a.jsxs)(x.Cf,{className:"sm:max-w-[725px] p-6 rounded-lg",children:[(0,a.jsx)(x.c7,{children:(0,a.jsx)(x.L3,{children:"Import Products"})}),(0,a.jsxs)("div",{...S(),className:(0,b.cn)("border-2 border-dashed px-6 py-24 flex items-center justify-center text-center rounded-lg cursor-pointer",d?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("input",{...k()}),r?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:(0,b.cn)("text-sm",d?"text-red-500":"text-green-600"),children:r.name}),(0,a.jsx)("span",{className:"text-gray-800 text-sm underline",children:"Change"})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)(p.A,{className:"mx-auto mb-2 text-gray-500",size:32}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Drag and drop file here or"," ",(0,a.jsx)("span",{className:"text-gray-900 text-sm underline",children:"Click to upload"})]})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Supported format: .xlsx | Maximum size: 5MB"}),d&&(0,a.jsxs)(m.Fc,{variant:"destructive",className:"mt-4",children:[(0,a.jsx)(m.XL,{children:"Error"}),(0,a.jsxs)(m.TN,{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:d}),(0,a.jsx)(j.A,{className:"h-4 w-4 cursor-pointer",onClick:()=>f(null)})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-2  p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.default,{src:"/xls.png",alt:"sample",width:20,height:20}),(0,a.jsx)("p",{className:"text-sm font-semibold",children:"Sample Format"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 my-3",children:"Download this sample Excel file and use it as a reference for your product data."})]}),(0,a.jsxs)(c.$,{variant:"ghost",onClick:()=>{let e=document.createElement("a");e.href="https://ujputcylhp.ufs.sh/f/jvPVlPOjcwEvNoZcVprsVy4padmcboelWwQuNOD7tUhHq9g2",e.download="sample-format.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e)},children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Download"]})]}),(0,a.jsxs)(x.Es,{className:"mt-6",children:[(0,a.jsx)(c.$,{variant:"outline",disabled:n,onClick:C,children:"Cancel"}),(0,a.jsx)(c.$,{onClick:F,disabled:!r||n,children:n?(0,a.jsx)(v.A,{className:"animate-spin h-4 w-4"}):"Import File"})]})]})]})}var C=r(41466),w=r(51500),S=r(49885),k=r(30872),F=r(5608),I=r(84668),A=r(39329),P=r(75688),z=r(28509),L=r(49369);let E=(0,f.createServerReference)("40264716b0e719ef4e379732deff548cb195f4e977",f.callServer,void 0,f.findSourceMapURL,"uploadProductImages");function R(e){let{isOpened:s,modelID:r,onClose:t}=e,[n,i]=(0,l.useState)([]),[d,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(null),y=(0,l.useCallback)(e=>{i(s=>[...s,...e]),f(null)},[]),{getRootProps:N,getInputProps:C}=(0,o.VB)({onDrop:y,accept:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},multiple:!0}),w=async()=>{if(0===n.length)return;h(!0),f(null);let e=new FormData;1===n.length?e.append(r,n[0]):n.forEach(s=>e.append(r,s));try{let s=await E(e);s.success||f(s.message),L.oR.success("Images uploaded successfully"),i([]),t()}catch(e){f("Failed to upload images. Please try again."),L.oR.error("Failed to upload images. Please try again.")}finally{h(!1)}},S=e=>{i(s=>s.filter((s,r)=>r!==e))};return(0,a.jsx)(x.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(x.Cf,{className:"sm:max-w-[725px] p-6 rounded-lg",children:[(0,a.jsx)(x.c7,{children:(0,a.jsx)(x.L3,{children:"Upload Images"})}),(0,a.jsxs)("div",{...N(),className:(0,b.cn)("border-2 border-dashed px-6 py-16 flex flex-col items-center text-center rounded-lg cursor-pointer",g?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("input",{...C()}),(0,a.jsx)(p.A,{className:"mb-2 text-gray-500",size:32}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Drag and drop images here or"," ",(0,a.jsx)("span",{className:"text-gray-900 cursor-pointer underline",children:"Click to upload"})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Supported formats: .jpg, .jpeg, .png, .gif, .webp"}),g&&(0,a.jsxs)(m.Fc,{variant:"destructive",children:[(0,a.jsx)(m.XL,{children:"Error"}),(0,a.jsx)(m.TN,{children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:g}),(0,a.jsx)("span",{className:"cursor-pointer",onClick:()=>f(null),children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})]})})]}),n.length>0&&(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:n.map((e,s)=>(0,a.jsxs)("div",{className:"relative group h-16 w-16",children:[(0,a.jsx)(u.default,{src:URL.createObjectURL(e),alt:"Preview ".concat(s),width:64,height:64,className:"rounded-md object-cover h-full w-full border border-gray-200"}),(0,a.jsx)("button",{className:"absolute -top-1.5 -right-1.5 bg-white rounded-full p-0.5 shadow-sm border border-gray-200 opacity-80 hover:opacity-100 transition-opacity",onClick:()=>S(s),children:(0,a.jsx)(j.A,{className:"h-3 w-3 text-gray-500"})})]},s))}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:t,disabled:d,children:"Cancel"}),(0,a.jsx)(c.$,{onClick:w,disabled:0===n.length||d,children:d?(0,a.jsx)(v.A,{className:"animate-spin",size:16}):"Upload Images"})]})]})})}var D=r(79730),M=r(31162),J=r(31025);let q=e=>{let s=[];return e.results&&(console.log("products",e.results),e.results.forEach(e=>{e.models.forEach(r=>{s.push({productId:e.id,productName:e.name,category:e.subCategory.category.name,subCategory:e.subCategory.name,modelId:r.id,modelName:r.name,description:r.description,price:r.price,inventory:r.inventory.quantity,features:r.features,status:r.status,isFeatured:"true"===r.isFeatured})})})),s},$=()=>{var e,s,r;let[t,n]=(0,l.useState)(""),[i,d]=(0,l.useState)(1),[o,u]=(0,l.useState)(10),[m,h]=(0,l.useState)({key:"modelName",direction:"asc"}),[p,j]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),[f,y]=(0,l.useState)(!1),[b,N]=(0,l.useState)(null),[L,E]=(0,l.useState)({modelName:"",productName:"",category:"",subCategory:"",description:"",price:0,inventory:0,features:[],productId:"",modelId:"",status:"draft",isFeatured:!1});(0,l.useEffect)(()=>{b&&E({modelName:b.modelName,modelId:b.modelId,productName:b.productName,productId:b.productId,category:b.category,subCategory:b.subCategory,description:b.description||"",price:b.price,inventory:b.inventory,status:b.status,isFeatured:b.isFeatured,features:b.features.map(e=>({description:e.description}))})},[b]);let $=e=>{N(e),j(!0)},O=e=>{N(e),v(!0)},U=e=>{N(e),y(!0)},{data:V,isLoading:T,error:_}=(0,C.Q)(),{data:H,isLoading:B,error:K}=(0,J.F)(),{data:G,isLoading:Q,error:X}=(0,J.Y)();if(T)return(0,a.jsx)("div",{className:"flex justify-center p-6",children:"Loading products..."});if(_)return(0,a.jsx)("div",{className:"flex justify-center p-6 text-red-500",children:"Error loading products"});let Y=[...q(V.data).filter(e=>e.modelName.toLowerCase().includes(t.toLowerCase())||e.productName.toLowerCase().includes(t.toLowerCase()))].sort((e,s)=>e[m.key]<s[m.key]?"asc"===m.direction?-1:1:e[m.key]>s[m.key]?"asc"===m.direction?1:-1:0);Y.length;let W=(i-1)*o,Z=Y.slice(W,W+o),ee=e=>{let s="asc";m.key===e&&"asc"===m.direction&&(s="desc"),h({key:e,direction:s})},es=e=>m.key!==e?null:"asc"===m.direction?(0,a.jsx)(A.A,{className:"ml-1 h-4 w-4 inline"}):(0,a.jsx)(P.A,{className:"ml-1 h-4 w-4 inline"}),er=()=>{E(e=>({...e,features:[...e.features,{description:""}]}))},ea=(e,s)=>{E(r=>({...r,features:r.features.map((r,a)=>a===e?{description:s}:r)}))},el=e=>{E(s=>({...s,features:s.features.filter((s,r)=>r!==e)}))};return console.log("edit values",L),(0,a.jsxs)("div",{className:"container mx-auto py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Products Catalog"}),(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsx)(I.p,{placeholder:"Search products...",value:t,onChange:e=>n(e.target.value),className:"w-64"})})]}),(0,a.jsx)("div",{className:"border rounded-md",children:(0,a.jsxs)(w.XI,{children:[(0,a.jsx)(w.A0,{children:(0,a.jsxs)(w.Hj,{children:[(0,a.jsxs)(w.nd,{className:"cursor-pointer",onClick:()=>ee("modelName"),children:["Model ",es("modelName")]}),(0,a.jsxs)(w.nd,{className:"cursor-pointer",onClick:()=>ee("productName"),children:["Product ",es("productName")]}),(0,a.jsxs)(w.nd,{className:"cursor-pointer",onClick:()=>ee("category"),children:["Category ",es("category")]}),(0,a.jsxs)(w.nd,{className:"cursor-pointer",onClick:()=>ee("subCategory"),children:["Sub Category ",es("subCategory")]}),(0,a.jsxs)(w.nd,{className:"cursor-pointer text-right",onClick:()=>ee("price"),children:["Price ",es("price")]}),(0,a.jsxs)(w.nd,{className:"cursor-pointer text-right",onClick:()=>ee("inventory"),children:["Stock ",es("inventory")]}),(0,a.jsx)(w.nd,{className:"w-10"})]})}),(0,a.jsx)(w.BF,{children:Z.length>0?Z.map(e=>(0,a.jsxs)(w.Hj,{children:[(0,a.jsx)(w.nA,{className:"font-medium",children:e.modelName}),(0,a.jsx)(w.nA,{children:e.productName}),(0,a.jsx)(w.nA,{children:e.category}),(0,a.jsx)(w.nA,{children:e.subCategory}),(0,a.jsxs)(w.nA,{className:"text-right",children:["KSH",(e.price/100).toFixed(2)]}),(0,a.jsx)(w.nA,{className:"text-right",children:e.inventory}),(0,a.jsx)(w.nA,{onClick:e=>e.stopPropagation(),children:(0,a.jsxs)(S.rI,{children:[(0,a.jsx)(S.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,a.jsx)(z.A,{className:"h-4 w-4"})]})}),(0,a.jsxs)(S.SQ,{align:"end",children:[(0,a.jsx)(S.lp,{children:"Actions"}),(0,a.jsx)(S._2,{onClick:()=>navigator.clipboard.writeText(e.modelId),children:"Copy model ID"}),(0,a.jsx)(S._2,{onClick:()=>U(e),children:"View Details"}),(0,a.jsx)(S._2,{onClick:()=>O(e),children:"Add model Images"}),(0,a.jsx)(S._2,{onClick:()=>$(e),children:"Edit"})]})]})})]},e.modelId)):(0,a.jsx)(w.Hj,{children:(0,a.jsx)(w.nA,{colSpan:8,className:"text-center h-24",children:"No products found."})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(F.l6,{value:o.toString(),onValueChange:e=>{u(Number(e)),d(1)},children:[(0,a.jsx)(F.bq,{className:"w-16",children:(0,a.jsx)(F.yv,{placeholder:o})}),(0,a.jsxs)(F.gC,{children:[(0,a.jsx)(F.eb,{value:"5",children:"5"}),(0,a.jsx)(F.eb,{value:"10",children:"10"}),(0,a.jsx)(F.eb,{value:"25",children:"25"}),(0,a.jsx)(F.eb,{value:"50",children:"50"})]})]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"per page"})]}),(0,a.jsx)(k.dK,{children:(0,a.jsx)(k.Iu,{children:(0,a.jsx)(k.cU,{children:(0,a.jsx)(k.Eb,{onClick:()=>d(e=>Math.max(e-1,1)),className:1===i?"pointer-events-none opacity-50":"cursor-pointer"})})})})]}),(0,a.jsx)(R,{isOpened:g&&null!==b,modelID:(null==b?void 0:b.modelId)||"",onClose:()=>v(!1)}),(0,a.jsx)(x.lG,{open:f,onOpenChange:y,children:(0,a.jsxs)(x.Cf,{className:"max-w-lg",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Product Details"}),(0,a.jsxs)(x.rr,{children:["Model: ",null==b?void 0:b.modelName]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Product:"})," ",null==b?void 0:b.productName]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Category:"})," ",null==b?void 0:b.category]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"sub Category:"})," ",null==b?void 0:b.subCategory]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",null==b?void 0:b.description]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Price:"})," KSH ",((null==b?void 0:b.price)/100).toFixed(2)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Status:"}),null==b?void 0:b.status]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Is Featured:"})," ",null==b?void 0:b.isFeatured.toString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Inventory:"})," ",null==b?void 0:b.inventory]}),(null==b?void 0:b.features)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Features:"}),(0,a.jsx)("ul",{className:"list-disc list-inside",children:b.features.map((e,s)=>(0,a.jsx)("li",{children:e.description},s))})]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>y(!1),children:"Close"}),(0,a.jsx)(c.$,{variant:"default",onClick:()=>{$(b),y(!1)},children:"Edit"})]})]})}),(0,a.jsx)(x.lG,{open:p,onOpenChange:j,children:(0,a.jsxs)(x.Cf,{className:"max-w-lg max-h-[80dvh]",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Edit Product"}),(0,a.jsx)(x.rr,{children:"Modify product details below"})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-[27rem] overflow-y-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Model Name"}),(0,a.jsx)(I.p,{placeholder:"Model Name",value:L.modelName||"",onChange:e=>E(s=>({...s,modelName:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Product Name"}),(0,a.jsx)(I.p,{placeholder:"Product Name",value:L.productName||"",onChange:e=>E(s=>({...s,productName:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Category"}),(0,a.jsxs)(F.l6,{name:"categoryId",value:L.category,defaultValue:L.category,onValueChange:e=>E(s=>({...s,category:e})),children:[(0,a.jsx)(F.bq,{children:(0,a.jsx)(F.yv,{placeholder:"Select Category"})}),(0,a.jsx)(F.gC,{children:(null==G?void 0:G.data)!==null?Object.values(null!==(s=null==G?void 0:G.data)&&void 0!==s?s:{}).map(e=>(0,a.jsx)(F.eb,{value:e.name,children:e.name},e.id)):null})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Sub Category"}),(0,a.jsxs)(F.l6,{name:"subCategoryId",value:L.subCategory,defaultValue:L.subCategory,onValueChange:e=>E(s=>({...s,subCategory:e})),children:[(0,a.jsx)(F.bq,{children:(0,a.jsx)(F.yv,{placeholder:"Select subcategory"})}),(0,a.jsx)(F.gC,{children:(null==H?void 0:H.data)!==null?Object.values(null!==(r=null==H?void 0:H.data)&&void 0!==r?r:{}).map(e=>(0,a.jsx)(F.eb,{value:e.name,children:e.name},e.id)):null})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Description"}),(0,a.jsx)(D.T,{placeholder:"Description",value:L.description||"",onChange:e=>E(s=>({...s,description:e.target.value}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Price"}),(0,a.jsx)(I.p,{placeholder:"Price (KSH)",type:"number",value:void 0!==L.price?(L.price/100).toString():"",onChange:e=>E(s=>({...s,price:Math.round(100*Number(e.target.value))}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Inventory"}),(0,a.jsx)(I.p,{placeholder:"Inventory",type:"number",value:(null===(e=L.inventory)||void 0===e?void 0:e.toString())||"",onChange:e=>E(s=>({...s,inventory:Number(e.target.value)}))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Status"}),(0,a.jsxs)(F.l6,{value:L.status,onValueChange:e=>E(s=>({...s,status:e})),children:[(0,a.jsx)(F.bq,{id:"status",className:"w-full",children:(0,a.jsx)(F.yv,{placeholder:"Select status"})}),(0,a.jsxs)(F.gC,{children:[(0,a.jsx)(F.eb,{value:"draft",children:"Draft"}),(0,a.jsx)(F.eb,{value:"active",children:"Active"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"is Featured"}),(0,a.jsxs)(F.l6,{value:String(L.isFeatured),onValueChange:e=>E(s=>({...s,isFeatured:"true"===e})),children:[(0,a.jsx)(F.bq,{id:"isFeatured",className:"w-full",children:(0,a.jsx)(F.yv,{placeholder:"Selectâ€¦"})}),(0,a.jsxs)(F.gC,{children:[(0,a.jsx)(F.eb,{value:"true",children:"True"}),(0,a.jsx)(F.eb,{value:"false",children:"False"})]})]})]}),Array.isArray(L.features)&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Features"}),(0,a.jsx)(c.$,{size:"sm",variant:"destructive",onClick:()=>er(),children:"Add"})]}),L.features.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.T,{placeholder:"Feature description",value:e.description,onChange:e=>ea(s,e.target.value)}),(0,a.jsx)(c.$,{size:"sm",variant:"destructive",onClick:()=>el(s),children:"Remove"})]},s))]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,a.jsx)(c.$,{variant:"default",children:"Save"})]})]})})]})};var O=r(90895);l.forwardRef((e,s)=>{let{className:r,value:l,...t}=e;return(0,a.jsx)(O.bL,{ref:s,className:(0,b.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",r),...t,children:(0,a.jsx)(O.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})}).displayName=O.bL.displayName;var U=r(98895);let V=(0,f.createServerReference)("60d29211137dbd750f67bac006cf0d71e809d654a8",f.callServer,void 0,f.findSourceMapURL,"createProduct");var T=r(30210);function _(e){var s;let{open:r,onClose:t}=e,n=(0,T.useRouter)(),[i,d]=(0,l.useState)({name:"",subCategoryId:"",defaultPrice:0,models:[]}),{data:o,isLoading:u,error:m}=(0,J.F)(),[h,p,j]=(0,l.useActionState)(async(e,s)=>V(e,s),{success:!1,message:"",inputs:{}});(0,l.useEffect)(()=>{h.success&&(L.oR.success(h.message),n.push("/dashboard/product"))},[h.success]);let g=(e,s,r)=>{let a=[...i.models];a[e]={...a[e],[s]:"price"===s?parseFloat(r):r},d({...i,models:a})},v=(e,s,r)=>{let a=[...i.models];a[e].features[s].description=r,d({...i,models:a})},f=e=>{let s=[...i.models];s[e].features.push({description:""}),d({...i,models:s})},y=(e,s)=>{let r=[...i.models];r[e].inventory.quantity=parseInt(s,10)||0,d({...i,models:r})},b=e=>{d({...i,models:i.models.filter((s,r)=>r!==e)})};return u?(0,a.jsx)("p",{children:"Loading subCategories..."}):m?(0,a.jsx)("p",{children:"Error fetching subCategories"}):(0,a.jsx)(x.lG,{open:r,onOpenChange:t,children:(0,a.jsxs)(x.Cf,{className:"max-w-3xl p-6 space-y-4 overflow-y-auto max-h-[70dvh]",children:[(0,a.jsx)(x.c7,{children:(0,a.jsx)(x.L3,{children:"Add New Product"})}),(0,a.jsxs)("form",{action:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(I.p,{id:"name",name:"name",value:i.name,onChange:e=>d({...i,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{htmlFor:"subCategoryId",children:"Sub Category"}),(0,a.jsxs)(F.l6,{name:"subCategoryId",value:i.subCategoryId,onValueChange:e=>d({...i,subCategoryId:e}),children:[(0,a.jsx)(F.bq,{children:(0,a.jsx)(F.yv,{placeholder:"Select subcategory"})}),(0,a.jsx)(F.gC,{children:(null==o?void 0:o.data)!==null?Object.values(null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{}).map(e=>(0,a.jsx)(F.eb,{value:e.id,children:e.name},e.id)):null})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{htmlFor:"defaultPrice",children:"Default Price"}),(0,a.jsx)(I.p,{id:"defaultPrice",name:"defaultPrice",type:"number",value:i.defaultPrice.toString(),onChange:e=>d({...i,defaultPrice:parseFloat(e.target.value)||0}),required:!0})]}),(0,a.jsx)("input",{type:"hidden",name:"models",value:JSON.stringify(i.models)}),i.models.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 border rounded space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h4",{className:"font-semibold",children:["Model #",s+1]}),(0,a.jsx)(c.$,{variant:"destructive",size:"sm",onClick:()=>b(s),children:"Remove"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Name"}),(0,a.jsx)(I.p,{value:e.name,onChange:e=>g(s,"name",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Description"}),(0,a.jsx)(I.p,{value:e.description||"",onChange:e=>g(s,"description",e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Price"}),(0,a.jsx)(I.p,{type:"number",value:e.price.toString(),onChange:e=>g(s,"price",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(M.J,{children:"Features"}),e.features.map((e,r)=>(0,a.jsx)(I.p,{value:e.description,onChange:e=>v(s,r,e.target.value),placeholder:"Feature description"},r)),(0,a.jsx)(c.$,{type:"button",size:"sm",onClick:()=>f(s),children:"Add Feature"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.J,{children:"Quantity"}),(0,a.jsx)(I.p,{type:"number",value:e.inventory.quantity.toString(),onChange:e=>y(s,e.target.value)})]})]},s)),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(c.$,{type:"button",onClick:()=>{d(e=>({...e,models:[...e.models,{name:"",description:"",price:0,features:[{description:""}],inventory:{quantity:0}}]}))},children:"Add Model"}),(0,a.jsx)(c.$,{type:"submit",disabled:j,children:"Create Product"})]})]})]})})}U.z.object({productData:U.z.object({name:U.z.string().min(1),subCategoryId:U.z.string().uuid(),defaultPrice:U.z.number().min(0),models:U.z.array(U.z.object({name:U.z.string().min(1),description:U.z.string().optional(),price:U.z.number().min(0),features:U.z.array(U.z.object({description:U.z.string().min(1)})),inventory:U.z.object({quantity:U.z.number().int().min(0)})}))})});let H=e=>{let{data:s,isLoading:r,error:o}=(0,C.Q)(),[u,x]=(0,l.useState)(!1);return r?(0,a.jsx)("p",{children:"Loading products..."}):o?(0,a.jsx)("p",{children:"Error fetching products"}):(0,a.jsx)(t.A,{scrollable:!1,children:(0,a.jsxs)("div",{className:"flex flex-1 flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)(n.D,{title:"Products",description:"Manage products "}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(c.$,{variant:"outline",onClick:()=>x(!0),children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Add Product"]}),(0,a.jsx)(_,{open:u,onClose:()=>x(!1)}),(0,a.jsx)(N,{})]})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsx)($,{})]})})}},20642:(e,s,r)=>{"use strict";r.d(s,{Fc:()=>d,TN:()=>o,XL:()=>c});var a=r(51047),l=r(76847),t=r(87285),n=r(89039);let i=(0,t.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=l.forwardRef((e,s)=>{let{className:r,variant:l,...t}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(i({variant:l}),r),...t})});d.displayName="Alert";let c=l.forwardRef((e,s)=>{let{className:r,...l}=e;return(0,a.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...l})});c.displayName="AlertTitle";let o=l.forwardRef((e,s)=>{let{className:r,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...l})});o.displayName="AlertDescription"},31162:(e,s,r)=>{"use strict";r.d(s,{J:()=>c});var a=r(51047),l=r(76847),t=r(91609),n=r(87285),i=r(89039);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=l.forwardRef((e,s)=>{let{className:r,...l}=e;return(0,a.jsx)(t.b,{ref:s,className:(0,i.cn)(d(),r),...l})});c.displayName=t.b.displayName},79730:(e,s,r)=>{"use strict";r.d(s,{T:()=>n});var a=r(51047),l=r(76847),t=r(89039);let n=l.forwardRef((e,s)=>{let{className:r,...l}=e;return(0,a.jsx)("textarea",{className:(0,t.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...l})});n.displayName="Textarea"},31025:(e,s,r)=>{"use strict";r.d(s,{Y:()=>i,F:()=>d});var a=r(63904),l=r(35672);let t=(0,l.createServerReference)("00c50718bb90c349336f8e6ad86400aa5c50c3ac1e",l.callServer,void 0,l.findSourceMapURL,"getCategories"),n=(0,l.createServerReference)("00eb0b640fda08474c18af06f928b199e4021f4f0c",l.callServer,void 0,l.findSourceMapURL,"getSubCategories"),i=()=>(0,a.I)({queryKey:["categories"],queryFn:()=>t(),staleTime:0,retry:2}),d=()=>(0,a.I)({queryKey:["subcategories"],queryFn:()=>n(),staleTime:0,retry:2})}},e=>{var s=s=>e(e.s=s);e.O(0,[9632,6796,7584,6629,6706,9369,3904,482,2657,6368,6539,7990,2779,5506,5721,9059,7358],()=>s(34173)),_N_E=e.O()}]);